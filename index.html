<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invitación a la Cita</title>
    <!-- Incluye Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos personalizados para el fondo y las animaciones */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fce7f3; /* Rosa claro para un toque romántico */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Asegura que el cuerpo ocupe al menos el 100% del alto del viewport */
            margin: 0;
            overflow: hidden; /* Para que los corazones no generen scroll */
        }
        .card-container {
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 30px;
            width: 90%; /* Ocupa el 90% del ancho disponible */
            max-width: 500px; /* Máximo de 500px para pantallas grandes */
            text-align: center;
            position: relative;
            overflow: hidden; /* Para contener los corazones dentro de la tarjeta */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 600px; /* Altura mínima para asegurar que el Tetris quepa cómodamente */
        }
        .page {
            display: none;
            flex-grow: 1;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        .page.active {
            display: flex;
        }
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-top: 20px;
        }
        .btn {
            background-color: #f472b6; /* Rosa más oscuro */
            color: white;
            padding: 12px 25px;
            border-radius: 15px;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);
            cursor: pointer;
        }
        .btn:hover {
            background-color: #ec4899; /* Rosa aún más oscuro al pasar el ratón */
            transform: translateY(-2px);
        }
        .heart-icon {
            color: #ef4444; /* Rojo vibrante */
            font-size: 6rem;
            margin-bottom: 20px;
            animation: pulse 1.5s infinite alternate;
        }

        /* Animación de pulso para el corazón */
        @keyframes pulse {
            from {
                transform: scale(1);
            }
            to {
                transform: scale(1.1);
            }
        }

        /* Estilos para el juego de Tetris */
        canvas {
            border: 2px solid #f472b6;
            background-color: #1a202c; /* Fondo oscuro para el juego */
            display: block;
            margin: 20px auto;
            border-radius: 10px;
        }

        /* Animación de corazones explotando */
        .heart-explosion {
            position: absolute;
            background-color: #ef4444; /* Rojo */
            border-radius: 50%;
            opacity: 0;
            animation: explode 1s forwards;
            pointer-events: none; /* Para que no interfieran con clics */
            z-index: 1000;
        }

        @keyframes explode {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(2);
                opacity: 0;
            }
        }

        /* Estilos para las opciones de cena */
        .dinner-option {
            background-color: #ffe4e6; /* Rosa muy claro */
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #333;
        }
        .dinner-option:hover {
            background-color: #fbcfe8; /* Rosa un poco más oscuro */
            transform: translateY(-2px);
        }
        .dinner-option a {
            text-decoration: none;
            color: inherit;
            display: block;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="card-container">
        <!-- Página 1: Ubicación -->
        <div id="page1" class="page active">
            <h2 class="text-4xl font-bold text-pink-600 mb-6">¡Quieres salir conmigo?</h2>
            <div class="text-7xl mb-8 heart-icon">❤️</div>
            <p class="text-xl text-gray-700 mb-4">NUESTRA CITA ES EN:</p>
            <p class="text-2xl font-semibold text-pink-500 mb-6">
                <a href="https://maps.app.goo.gl/CJkWvseWce87mwm89?g_st=ipc" target="_blank" class="text-pink-500 hover:underline">
                    📍 Palermo
                </a>
            </p>
            <p class="text-lg text-gray-600">¡Te espero con ansias!</p>
        </div>

        <!-- Página 2: Tetris -->
        <div id="page2" class="page">
            <h2 class="text-3xl font-bold text-pink-600 mb-6">Un Pequeño Juego para Ti</h2>
            <p class="text-lg text-gray-700 mb-4">¡Relájate y juega un poco de Tetris!</p>
            <canvas id="tetrisCanvas" width="240" height="400"></canvas>
        </div>

        <!-- Página 3: Encuesta de Cena -->
        <div id="page3" class="page">
            <h2 class="text-3xl font-bold text-pink-600 mb-6">¿Qué te apetece cenar?</h2>
            <p class="text-lg text-gray-700 mb-6">¡Elige tu opción favorita para nuestra cena!</p>
            <div class="w-full">
                <div class="dinner-option">
                    <a href="https://maps.app.goo.gl/GcUSVYt4NnmCqyrF7?g_st=ipc" target="_blank">
                        🍕 Opción Focaccia
                    </a>
                </div>
                <div class="dinner-option">
                    <a href="https://maps.app.goo.gl/7hVHstpRWk12gVep7?g_st=ipc" target="_blank">
                        🍝 Opción Pasta
                    </a>
                </div>
                <div class="dinner-option">
                    <a href="https://maps.app.goo.gl/unbVQMkkDLgJs9b78?g_st=ipc" target="_blank">
                        🍔 Opción Bodegón (Hamburguesa)
                    </a>
                </div>
            </div>
        </div>

        <!-- Página 4: Gracias y Regalo -->
        <div id="page4" class="page">
            <h2 class="text-4xl font-bold text-pink-600 mb-6">¡Gracias por venir!</h2>
            <p class="text-xl text-gray-700 mb-8">¡Espero que disfrutes de este pequeño detalle!</p>
            <button id="giftButton" class="btn">Apreta acá para tu regalo</button>
        </div>

        <!-- Controles de navegación -->
        <div class="navigation-buttons">
            <button id="prevBtn" class="btn" style="display: none;">Anterior</button>
            <button id="nextBtn" class="btn">Siguiente</button>
        </div>
    </div>

    <script>
        // JavaScript para la navegación entre páginas
        let currentPage = 1;
        const totalPages = 4;
        const pages = document.querySelectorAll('.page');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const giftButton = document.getElementById('giftButton');
        const cardContainer = document.querySelector('.card-container');

        function showPage(pageNumber) {
            pages.forEach((page, index) => {
                if (index + 1 === pageNumber) {
                    page.classList.add('active');
                } else {
                    page.classList.remove('active');
                }
            });

            // Actualizar visibilidad de los botones de navegación
            prevBtn.style.display = pageNumber === 1 ? 'none' : 'block';
            nextBtn.style.display = pageNumber === totalPages ? 'none' : 'block';
        }

        nextBtn.addEventListener('click', () => {
            if (currentPage < totalPages) {
                currentPage++;
                showPage(currentPage);
            }
        });

        prevBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                showPage(currentPage);
            }
        });

        // JavaScript para el juego de Tetris (simplificado)
        const canvas = document.getElementById('tetrisCanvas');
        const ctx = canvas.getContext('2d');
        const COLS = 10;
        const ROWS = 20;
        const BLOCK_SIZE = 20;
        let board = Array.from({ length: ROWS }, () => Array(COLS).fill(0));
        let score = 0;
        let gameOver = false;

        const PIECES = [
            [[1, 1, 1, 1]], // I
            [[1, 1], [1, 1]], // O
            [[0, 1, 0], [1, 1, 1]], // T
            [[1, 1, 0], [0, 1, 1]], // S
            [[0, 1, 1], [1, 1, 0]], // Z
            [[1, 0, 0], [1, 1, 1]], // L
            [[0, 0, 1], [1, 1, 1]]  // J
        ];

        const COLORS = [
            '#000', // No block
            'cyan', 'yellow', 'purple', 'green', 'red', 'orange', 'blue'
        ];

        let currentPiece;
        let currentX;
        let currentY;

        function newPiece() {
            const rand = Math.floor(Math.random() * PIECES.length);
            currentPiece = PIECES[rand];
            currentX = Math.floor(COLS / 2) - Math.floor(currentPiece[0].length / 2);
            currentY = 0;

            if (!isValidMove(0, 0, currentPiece)) {
                gameOver = true;
                // Reemplazado alert() por un mensaje en consola
                console.log('Game Over! Score: ' + score);
            }
        }

        function drawBlock(x, y, color) {
            ctx.fillStyle = color;
            ctx.fillRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);
            ctx.strokeStyle = '#333';
            ctx.strokeRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);
        }

        function drawBoard() {
            for (let r = 0; r < ROWS; r++) {
                for (let c = 0; c < COLS; c++) {
                    drawBlock(c, r, COLORS[board[r][c]]);
                }
            }
        }

        function drawPiece() {
            for (let r = 0; r < currentPiece.length; r++) {
                for (let c = 0; c < currentPiece[r].length; c++) {
                    if (currentPiece[r][c]) {
                        drawBlock(currentX + c, currentY + r, COLORS[PIECES.indexOf(currentPiece) + 1]);
                    }
                }
            }
        }

        function isValidMove(offsetX, offsetY, newPiece) {
            for (let r = 0; r < newPiece.length; r++) {
                for (let c = 0; c < newPiece[r].length; c++) {
                    if (newPiece[r][c]) {
                        const newX = currentX + c + offsetX;
                        const newY = currentY + r + offsetY;

                        if (newX < 0 || newX >= COLS || newY >= ROWS || (newY >= 0 && board[newY][newX])) {
                            return false;
                        }
                    }
                }
            }
            return true;
        }

        function mergePiece() {
            for (let r = 0; r < currentPiece.length; r++) {
                for (let c = 0; c < currentPiece[r].length; c++) {
                    if (currentPiece[r][c]) {
                        board[currentY + r][currentX + c] = PIECES.indexOf(currentPiece) + 1;
                    }
                }
            }
        }

        function clearLines() {
            let linesCleared = 0;
            for (let r = ROWS - 1; r >= 0; r--) {
                if (board[r].every(cell => cell !== 0)) {
                    linesCleared++;
                    for (let row = r; row > 0; row--) {
                        board[row] = [...board[row - 1]];
                    }
                    board[0].fill(0);
                    r++; // Check the new line at this row index
                }
            }
            score += linesCleared * 100; // Simple scoring
        }

        function gameLoop() {
            if (gameOver) return;

            if (isValidMove(0, 1, currentPiece)) {
                currentY++;
            } else {
                mergePiece();
                clearLines();
                newPiece();
            }

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBoard();
            drawPiece();
            setTimeout(gameLoop, 500); // Piece drops every 500ms
        }

        // Initialize Tetris only when page 2 is active
        let tetrisInitialized = false;
        function initTetris() {
            if (!tetrisInitialized) {
                newPiece();
                gameLoop();
                tetrisInitialized = true;
            }
        }

        // Event listener for page changes to start Tetris
        nextBtn.addEventListener('click', () => {
            if (currentPage === 2 && !tetrisInitialized) {
                initTetris();
            }
        });

        // Simple keyboard controls for Tetris (for desktop)
        document.addEventListener('keydown', e => {
            if (currentPage === 2 && !gameOver) {
                if (e.key === 'ArrowLeft' && isValidMove(-1, 0, currentPiece)) {
                    currentX--;
                } else if (e.key === 'ArrowRight' && isValidMove(1, 0, currentPiece)) {
                    currentX++;
                } else if (e.key === 'ArrowDown' && isValidMove(0, 1, currentPiece)) {
                    currentY++;
                } else if (e.key === 'ArrowUp') { // Rotate
                    const rotatedPiece = currentPiece[0].map((_, index) =>
                        currentPiece.map(row => row[index]).reverse()
                    );
                    if (isValidMove(0, 0, rotatedPiece)) {
                        currentPiece = rotatedPiece;
                    }
                }
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                drawBoard();
                drawPiece();
            }
        });

        // JavaScript para la explosión de corazones
        giftButton.addEventListener('click', () => {
            const numHearts = 50; // Cantidad de corazones a explotar
            for (let i = 0; i < numHearts; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart-explosion'); // Usamos la clase 'heart-explosion'
                // Posición aleatoria dentro del contenedor de la tarjeta
                const x = Math.random() * cardContainer.offsetWidth;
                const y = Math.random() * cardContainer.offsetHeight;
                heart.style.left = `${x}px`;
                heart.style.top = `${y}px`;
                heart.style.width = `${Math.random() * 20 + 10}px`; // Tamaño aleatorio
                heart.style.height = heart.style.width;
                heart.style.animationDuration = `${Math.random() * 1 + 0.5}s`; // Duración aleatoria
                heart.style.animationDelay = `${Math.random() * 0.5}s`; // Retraso aleatorio
                cardContainer.appendChild(heart);

                // Eliminar el corazón después de la animación
                heart.addEventListener('animationend', () => {
                    heart.remove();
                });
            }
        });

        // Mostrar la primera página al cargar
        showPage(currentPage);
    </script>
</body>
</html>
